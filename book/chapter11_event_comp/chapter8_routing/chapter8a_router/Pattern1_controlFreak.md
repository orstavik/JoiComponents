# Pattern: NavigationControlFreak

> Warning! Do NOT complete the homework assignments in this chapter.
> Just read them, laugh, and toss them aside as you normally would.

Control. That great feeling. You are the master. 
No bad things are going to happen. Only good things.
Why is that? Because *you are in control*. And how do you know that?
Because that great *feeling of control is in you*.

The NavigationControlFreak pattern is about controlling navigation. 
But why do we need to control navigation?
When do we need to do that?
Why do we need to be in control, to feel in control?

## The rationale behind the NavigationControlFreak

To navigate is an action with two sides. You are going *to* someplace.
But you are also going *from* someplace else. Ok. That's nice. But what does that *feel* like?

Imagine you are going shopping. Christmas shopping. You are stressed out.
So many family members that don't really care about you, and that you don't really interact with.
But the gifts still needs to be gotten. That's all that's left.
And you most definitively don't want to show up with a bad gift.
You still have *some* pride, after all.

Your mind is working overtime. Solving a myriad of impossible contradictions at the same time. 
The gift cannot be ordinary, as that will make your family care about you even less. 
An ordinary gift will only justify their separation in their mind, cement it.
But the gifts cannot be too extra-ordinary and expensive either. That will only make them think that 
you are *both* desperate and pitiful *and* trying to guilt them into something. So, what do you do?

Of course, you have the choice of dissociation. 
You can emotionally distance yourself from the whole situation, and pretend that "Christmas gifts are of no
importance to me". But you don't want to be that guy. Because deep down, you *do* care. 
You sense that dissociation is a luxury you really cannot afford at this time with these people.
The emotional gaps around you is already too many and too wide.
So, instead you press the stress button. You focus. You actively seek to be creative! 
You dig as deep as you can in your memories. Searching. Trying to find that point of 
personal connection between yourself and that other family member, that needle in the haystack, 
that which you both had forgotten, but that shows you still care (without being needy).
You aim to ignite the neurons that house a fond memory of you in the mind of the other, 
that your gift will hit that sweet spot and make them think of you for once for a record-breaking 5-10 seconds. 
Before they open the next present.
That gift that will somehow restore that loving relationship that you still long for. It's Christmastime!

> Homework: Think. What trips stresses you out the most? Does going on vacation remind you of 
> your last failed marriage? Does visiting your in-laws fill you with shame? 
> Or is it going to your home town that you dread the most? Does all the road rage from your commute really
> misplaced anger at your work or boss? Or is it leaving work and going home that is most annoying?

## Worry about leaving, or leave your worries behind?

It is only when you get home from the five hour, late night sweat fest/shopping trip 
that you realize what on earth controlling navigation has to do with Christmas gifts.
As you put the shopping bags on the floor, you hope to get that good feeling of relief.
You hope that seeing the fruits of your labour there on the floor will feel a success and
mark the end of successful journey through the emotional minefield that is Christmas shopping.
However, as you lay down everything before you, you are instead filled with another, horrible sensation. 
Where's my favorite pair of mittens? The truly nice pair of hand wear that you so treasure? 
That pair currently too expensive to replace! That still look good after two winters warming your hands? 
No!! They are gone..

Where can they be? You took them off every time you needed to fish out your credit card at the checkout.
And when you needed to look closer at those useless nick-nacks in the store shelves. 
When was the last time you did that? $@#Â¤%!!...
As the feeling of failure fills you with yet another dose of stress hormones,
a clearing suddenly opens up in your mind. You bite in the impulse to release the stress as 
either sadness or anger. You don't cry. You don't swear out loud nor hit yourself in the forehead. 
Instead, you silently turn your disappointment into anger. And direct it inwards. 
"I will NEVER AGAIN loose my mittens. I will NEVER loose NOTHING AGAIN. 
I will ALWAYS CONTROL ALL my SHIT before I ever, EVER leave either ANY shelf or checkout counter. ALWAYS. 
NEVER AGAIN." As if delivered by a bolt of lightning, this angry, determined feeling of control 
instantly appears and balances out the feeling of loss that is the consciously felt for your
favorite mittens and subconsciously for the gradual loss of your only family. 

The feeling of control will never accept nor realize these losses. Instead, it will harbor them.
Use them to fuel and motivate you to hold on to this feeling of control for a *long* time. 
The control-freak is born. As a grudge. 
A grudge is the only thing that will help you to *never, ever loose your mittens again*.

> Homework: Think back. When was the last time you left something important behind?
> What other personal conflicts and emotional factors might have clouded your mind causing you to do so?

## Think ahead, or live in the moment?

With your teeth and resolve gritted, the ControlFreak returns to your current situation. 
"Bags on the floor?" Check. "List of family members?" Check. 
Ok, its time for the status rapport, matching gifts with list of family members.
With all other emotions than control firmly and angrily tucked away,
you see that you forgot your mother's gift. That most important stop. 
The person you most definitively would have liked stricken off your list. 
A short flash of added disappointment strikes you.
You must return to the Christmas mania again. You are not done.

However, after a quick, sober self evaluation, you determine that while the root cause for this oversight
is deeply troubling, the last straw causing you to forget your mother's present is not at all troubling you: 
today you simply lacked systematic control during navigation.
 
So, this flash of added disappointment quickly shifts to a feeling of hope!
"When I next time check for forgotten mittens, shoppingbags and wallets in the shop, 
I can *at the same time* check my shopping list, current traffic info, fastest route *and* best prices, 
*before* I set off! I need only extend my navigation system to include control of **where** I go next and 
**how** best to get there. It fits perfectly! I will simply always check that I both
*do not forget anything the places I leave* and *finds the correct route before I go someplace new*.
Yes! Hope! Next time, I will feel no anxiety when shopping Christmas gifts. The future will be better. 
All I need is *to control* all my navigation choices next time. At every point, both within and 
between shops. Yes! I'll be like a Christmas shopping machine. I will always find the best presents, 
that everyone will love. They will remember their love for me. And I'll be faster than all others.
And I will find the best prices too. And.. Ahh.. Yes! I love you control, you complete me!"

> Homework: Think back. In which areas of your life do you desire control the most?
> Do you feel optimistic about achieving control here? Is this sensation of control real?

## The Router is a NavigationControlFreak

Your app is you. You Christmas shopping. The trip is *not* the end goal. The trip is a means to an end. 

If your app is small, controlling navigation *might* be unnecessary.
Your app only has a few simple links. All in the same store. No external content, no co-gifter agendas
to consider.

However, most apps grow and are given more responsibility.
Your particular app has tons of things on its mind. And your app has a legacy, it has baggage. 
That you made last month. It gets content from many different sources.
It needs to go many different places, within shops and between them.
At times, it is not even given where it needs to go: it might need to evaluate the products in store, 
there and then; and it might benefit from considering traffic jams.
You don't *want* to focus on navigation control, you *must*. 
Because in the back of your mind lurks the ghosts of your favorite mittens.

So, you make a Router. ALL navigation requests SHALL go via this Router.
The Router is responsible and with it you can *control* the navigation.

First, the Router must *take control* of all navigation. 
The Router must intercept and take control of the navigation within the app.
It must highjack all peripheral navigation events and calls.

Second, the Router implements its controls for *leaving* places.
 * Have you any data with you that you need to store before you leave? 
   Did you temporary put any mittens on the floor? If so, pick them up, store it, take them with you, keep them.
 * Do you need to ask your user for permission to leave, are you really sure you want to leave? 
   If so, ask.

Third, the Router implements its controls for *going to* places.
 * Where do you want to go? Are there any other places closer by, that you can get to faster with the same result?
 * How's traffic? Should I avoid any congested routes? Are there shortcuts I can use?
 * Is it safe to go there? Is a bad advertisment trying to lure you to a store in an unsafe neighborhood?
 * Is it a good time to be creative? Can I do something creative with this next tour to give my user a little gift?

> Homework: Think hard. What personal issues is informing your architectural choices? 
> And how do you feel about that? Which personal issues do you think your code might benefit from?
> Do you have some extra-ordinary socio-emtional coping mechanisms that you can employ in your code
> to give you that creative edge?

## ControlFreak in general

Apps can be ControlFreaks about many things, not just navigation. 
The app can be a ControlFreak about its state, insisting on a *single* state under *singular* control.
Management of data and storage is often singular and restricted.
In fact, if you are adequately generous with the ControlFreak concept, 
all modularization can be viewed as such.

So. How is the ControlFreak pattern different from modularization.
First, the control freak is rigid. And at first sight excessive:
1. The control seem to be too granular. Control is being employed too often and in too much detail.
   The ControlFreakNavigation to intercepts all navigation. One might have thought that page internal
   navigation (#location) might be excluded for example. One might think that it would be enough
   to check for mittens every time you leave a store, not every time you leave an isle. 
2. The ControlFreak systematically focus on checking *everything everytime*.
   The ControlFreakNavigation systematically check both what you leave and where you go.
   As mittens are only lost during the hectic winter shopping, 
   it might seem reasonable to only apply these checks depending on the situation, not all the time.

Too much rigidity and detail make the ControlFreak seem irrational.   
He might appear as controlling the irrelevant for the sake of *feeling in control*, 
rather than applying appropriate checks for the purpose of actually *being in control* (cf. OCD).
The ControlFreak pattern willingly accepts this risk. Although he rarely touts it, he
believes that it is actually better to control too much (apply a complete system of checks on every 
situation within a domain) than too little (and risk missing that one edge case that you the developer
just didn't think about).

The ControlFreak knows the expected level control and detail being touted by mainstream conventions
for a certain domain, and still individually choose to employ a more granular and all encompassing control 
to avoid the cost of edge case bugs.

## References
 * [Anti-pattern: OCD](https://en.wikipedia.org/wiki/Obsessive%E2%80%93compulsive_disorder)
 * [Anti-pattern: Fugue state](https://en.wikipedia.org/wiki/Fugue_state)
