<script src="../../src/router/beforeNavigate.js"></script>

<a id="one" href="omg.html" download rel="noopener blabla">hello</a>

<svg>
  <animate xlink:href="#test-a" attributeName="href" from="filename.html" to="animated.html" dur="1ms" begin="0s"
           fill="freeze"/>
  <a id="two" href="filename.html">
    <polygon id="boo" fill="red" stroke="black" points="360.5,406 62.757,371.5 61.125,72 360.5,89.5"/>
  </a>
</svg>

<map name="infographic">
  <area shape="poly" coords="130,147,200,107,254,219,130,228"
        id="three"
        rel="noopener blabla"
        href="https://developer.mozilla.org/docs/Web/HTML"
        target="_blank" alt="HTML" accesskey="p"/>
</map>
<img usemap="#infographic" src="https://interactive-examples.mdn.mozilla.net/media/examples/mdn-info2.png"
     alt="MDN infographic"/>

<form rel="noopener blabla" action="wtf.html" method="get">
  <input type="text" name="a" value="omg"/>
  <input type="text" name="b" value="wtf"/>
  <button id="four" type="submit"></button>
</form>

<script>

  function pressEnter(a) {
    a.focus({preventScroll: false});
    var keyboardEvent = new KeyboardEvent('keypress', {
      code: 'Enter',
      key: 'Enter',
      charCode: 13,
      keyCode: 13,
      bubbles: true
    });
    a.dispatchEvent(keyboardEvent);
  }

  window.addEventListener("beforeNavigate", function (e) {
    console.log(e);
    e.preventDefault();
  });

  //test1 clicking all navigation triggering elements.
  setTimeout(function () {
    document.querySelector("#one").click();
  }, 0);

  setTimeout(function () {
    document.querySelector("#boo").dispatchEvent(new MouseEvent("click", {bubbles: true, cancelable: true}));
  }, 0);

  setTimeout(function () {
    document.querySelector("#three").click();
  }, 0);

  setTimeout(function () {
    document.querySelector("#four").click();
  }, 0);

  //test2 keypress invoking all navigation triggering elements.
  setTimeout(function () {
    pressEnter(document.querySelector("#one"));
  }, 0);

  //todo

  //test 3 other invocations
  //calling .submit() will not trigger the submit event. nor click event.
  //  setTimeout(function () {
  //    const el = document.querySelector("form");
  //    el.addEventListener("submit", e => console.log(e));
  //    el.submit();
  //  }, 101);


</script>