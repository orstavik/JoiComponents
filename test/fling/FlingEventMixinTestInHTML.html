<!DOCTYPE html>
<html lang="en">
<body>

<style>
  fling-ball {
    display: block;
    position: fixed;
    top: 100px;
    width: 100px;
    height: 100px;
    border-radius: 50%;
    border: 4px solid red;
  }
</style>
<!--<script src="//cdn.rawgit.com/hammerjs/touchemulator/0.0.2/touch-emulator.js"></script>-->
<!--<script> TouchEmulator(); </script>-->

<fling-ball>
  fling me!
</fling-ball>

<script type="module">

  import {FlingEventMixin} from "../../src/FlingEventMixin.js";

  class FlingBall extends FlingEventMixin(HTMLElement) {

    constructor() {
      super();
      this._onDraggingListener = e => this._onDragging(e);
      this._onFlingingListener = e => this._onFlinging(e);
    }

    connectedCallback() {
      super.connectedCallback();
      this.addEventListener("dragging", this._onDraggingListener);
      this.addEventListener("flinging", this._onFlingingListener);
    }

    disconnectedCallback() {
      super.disconnectedCallback();
      this.removeEventListener("dragging", this._onDraggingListener);
      this.removeEventListener("flinging", this._onFlingingListener);
    }

    _onDragging(e) {
      this.style.transition = undefined;
      this.style.left = (parseFloat(this.style.left) + e.detail.moveX) + "px";
      this.style.top = (parseFloat(this.style.top) + e.detail.moveY) + "px";
    }

    _onFlinging(e) {
      const totalTime = e.totalTime;
      const addX = e.xSpeedPxMs * totalTime;
      const addY = e.ySpeedPxMs * totalTime;
      this.style.transition = "all " + totalTime + "ms cubic-bezier(0.39, 0.58, 0.57, 1)";
      this.style.left = (parseFloat(e.detail.left) + addX) + "px";
      this.style.top = (parseFloat(e.detail.top) + addY) + "px";
    }
  }

  customElements.define("fling-ball", FlingBall);
</script>

</body>
</html>